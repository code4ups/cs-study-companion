---
import MainLayout from "../layouts/MainLayout.astro";

// Static page – ΚΑΝΕΝΑ Astro.request.*
// Μπορείς να αφήσεις αυτό ή να το αφαιρέσεις τελείως (default είναι prerender = true).
export const prerender = true;

// Χρησιμοποίησε τη βάση του site από το Vite env (δουλεύει τέλεια με GitHub Pages base).
const base = import.meta.env.BASE_URL || '/';
const toEN = `${base}en/introduction`;
const toEL = `${base}el/introduction`;
---

<MainLayout title="CS Study Companion" lang="en">
    <section class="max-w-3xl mx-auto py-12 space-y-6">
        <h1 class="text-3xl font-bold text-indigo-700">CS Study Companion</h1>
        <p class="text-gray-700">Choose your language / Επίλεξε γλώσσα:</p>

        <div class="flex items-center gap-4">
            <a href={toEN} class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">English</a>
            <a href={toEL} class="px-4 py-2 bg-slate-200 text-slate-900 rounded hover:bg-slate-300">Ελληνικά</a>
        </div>

        <!-- Προαιρετικό: αυτόματο redirect με βάση το locale του browser -->
        <script is:inline>
            try {
                const base = {base};
                const pref = (navigator.language || '').toLowerCase();
                if (pref.startsWith('el')) {
                    location.replace(`${base}el/introduction`);
                } else {
                    location.replace(`${base}en/introduction`);
                }
            } catch {}
        </script>
    </section>
</MainLayout>
